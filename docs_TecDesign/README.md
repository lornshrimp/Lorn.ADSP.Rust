# Lorn.ADSP-Rust 技术架构设计文档

本目录包含Lorn.ADSP-Rust互联网广告平台的技术架构设计文档，以Rust技术专家视角提供详细的技术实现方案。系统基于Rust 1.75+技术栈构建，利用内存安全和零成本抽象特性，实现毫秒级响应的高性能广告投放平台。

## 文档目录

### 系统架构
- [系统整体技术架构](./系统整体技术架构.md) - 系统整体技术架构设计和组件依赖
- [数据架构设计](./数据架构设计.md) - 数据存储、缓存和消息队列架构
- [数据访问层技术设计](./数据访问层技术设计.md) - 数据访问抽象层和多数据库支持

### 核心服务
- [广告投放引擎/广告投放引擎技术设计](./广告投放引擎/广告投放引擎技术设计.md) - 投放引擎核心技术实现
- [OpenRTB协议实现](./OpenRTB协议实现.md) - 实时竞价协议技术规范
- [广告投放引擎/广告引擎抽象层设计](./广告投放引擎/广告引擎抽象层设计.md) - 广告引擎抽象接口层设计

### 配置管理和依赖注入
- [系统配置化和依赖注入设计/统一配置化和依赖注入架构设计](./系统配置化和依赖注入设计/统一配置化和依赖注入架构设计.md) - 统一配置管理和依赖注入架构

### 性能和扩展
- [广告投放引擎/性能优化设计](./广告投放引擎/性能优化设计.md) - 高性能、高并发技术方案
- [广告投放引擎/缓存架构设计](./广告投放引擎/缓存架构设计.md) - 分布式缓存和数据一致性
- [广告投放引擎/监控与告警设计](./广告投放引擎/监控与告警设计.md) - 系统监控、日志和运维方案
- [广告投放引擎/负载均衡与高可用设计](./广告投放引擎/负载均衡与高可用设计.md) - 高可用架构设计

### 安全和合规
- [广告投放引擎/安全架构设计](./广告投放引擎/安全架构设计.md) - 系统安全防护和数据保护
- [广告投放引擎/API设计规范](./广告投放引擎/API设计规范.md) - RESTful API设计标准和规范
- [广告投放引擎/数据安全与合规设计](./广告投放引擎/数据安全与合规设计.md) - 数据安全和合规性设计

### 部署和运维
- [广告投放引擎/部署架构设计](./广告投放引擎/部署架构设计.md) - 多云部署架构设计
- [广告投放引擎/错误处理与恢复设计](./广告投放引擎/错误处理与恢复设计.md) - 错误处理和故障恢复机制

## 技术选型

### 核心技术栈
- **Rust 1.75+**: 主要开发语言，提供内存安全和高性能运行时
- **Tokio**: 异步运行时，支持高并发Web服务和网络编程
- **Axum**: 现代化Web框架，用于构建高性能API服务
- **SeaORM**: 异步ORM框架，支持多种数据库和类型安全的查询
- **Tauri**: 跨平台桌面应用开发，用于监控和管理工具

### 客户端SDK技术栈
- **Tauri**: 跨平台桌面应用开发，支持Windows、macOS、Linux
- **Yew**: WebAssembly前端框架，用于构建高性能Web应用
- **TypeScript**: 小程序SDK开发，支持微信、支付宝、快应用等平台

### 多云数据存储架构
- **关系型数据库**: 
  - 阿里云：RDS MySQL/PostgreSQL、PolarDB
  - AWS：RDS MySQL/PostgreSQL、Aurora
- **分布式缓存**: Redis 7.0集群，支持阿里云Redis、Azure Cache、AWS ElastiCache
- **搜索引擎**: Elasticsearch 8.0，支持全文搜索和日志分析
- **消息队列**: Apache Kafka、RabbitMQ，支持多云托管服务

### 微服务与容器化
- **微服务架构**: 基于领域驱动设计(DDD)的微服务拆分
- **API网关**: 基于Axum的自定义网关，支持路由、限流、熔断
- **服务治理**: Consul服务发现和配置中心
- **容器化部署**: Docker容器化，Kubernetes编排

### 监控和运维
- **指标监控**: Prometheus + Grafana监控体系
- **链路追踪**: Jaeger分布式追踪系统
- **日志分析**: ELK Stack (Elasticsearch + Logstash + Kibana)
- **性能测试**: 基于Tokio的自定义负载测试框架

## 架构原则

1. **高性能设计**: 广告请求响应时间 < 50ms，支持100万+QPS竞价处理
2. **内存安全**: 基于Rust零成本抽象，编译时内存安全保证，无垃圾回收开销
3. **高可用架构**: 系统可用性 ≥ 99.9%，支持故障自动恢复和服务自愈
4. **弹性扩展**: 支持水平扩展，按需弹性伸缩，GPU加速AI推理
5. **标准合规**: 严格遵循IAB OpenRTB、VAST、VMAP等行业标准
6. **安全可靠**: 多层安全防护，完善的反作弊机制，AI模型安全防护
7. **数据驱动**: 全链路数据追踪，支持实时决策优化和AI增强分析
8. **多云支持**: 支持阿里云、Azure、AWS等多种云平台部署
9. **数据库无关**: 通过抽象层实现数据库厂商解耦，支持SeaORM异步操作
10. **流程可配置**: 广告投放引擎支持动态流程配置和策略热更新

## 文档更新

技术架构文档将随着项目开发进展持续更新，确保与实际Rust实现保持同步。所有设计文档都基于Rust技术栈和现代异步编程模型，充分发挥Rust的内存安全和高性能特性。

## Cargo工作空间架构

本项目采用分层架构设计，工作空间按功能域和技术栈进行组织：

- **01-presentation/**: 表示层，包含Web API、管理后台、广告主门户、桌面监控工具
- **02-services/**: 微服务层，包含广告引擎、竞价服务、定向服务等核心业务服务
- **03-strategies/**: 策略引擎层，基于Rust实现的召回、筛选、排序策略
- **04-core/**: 关键核心层，包含领域模型、应用服务、共享组件、抽象接口
- **05-infrastructure/**: 基础设施层，支持多数据库、缓存、消息队列、多云部署
- **06-external/**: 外部集成层，实现OpenRTB、VAST等IAB标准协议
- **07-client-sdk/**: 客户端SDK层，支持跨平台开发和WebAssembly高性能前端

详细的工作空间结构和依赖关系请参考[系统整体技术架构](./系统整体技术架构.md)文档。
